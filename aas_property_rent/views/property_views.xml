<odoo>

    <record id="property_view_tree_inherit" model="ir.ui.view">
        <field name="name">property.view.tree.inherit</field>
        <field name="model">property</field>
        <field name="inherit_id" ref="aas_property_management.property_view_tree" />
        <field name="arch" type="xml">
            <field name="property_owner_id" position="after">
                <field name="for_rent" optional="hide" />
                <field name="rent_type" optional="show" />
                <field name="expected_rent_price" optional="show" />
            </field>
        </field>
    </record>
    
    <record id="property_view_form_inherit" model="ir.ui.view">
        <field name="name">property.view.form.inherit</field>
        <field name="model">property</field>
        <field name="inherit_id" ref="aas_property_management.property_view_form" />
        <field name="arch" type="xml">
            <field name="deed_number" position="after">
                <field name="property_rent_state" invisible="1" />
                <field name="for_rent" class="oe_edit_only" attrs="{'readonly': [('property_rent_state', 'in', ['reserved','rented'])], 'invisible':[('is_mu', '=', True)]}" />
                <field name="for_rent" class="oe_read_only" attrs="{'invisible':[('for_rent', '=', False)]}" />
                <field name="property_type_name_related" invisible="1" />

                <field name="rent_type" attrs="{'readonly': [('property_type_name_related', '!=', 'Chalet')], 'invisible':[('for_rent', '=', False)]}" class="oe_inline" />
                <field name="expected_rent_price" attrs="{'invisible': [('for_rent', '=', False)]}" class="oe_inline" />
                <field name="refundable_insurance" attrs="{'invisible': [('for_rent', '=', False)]}" class="oe_inline" />
                <field name="rent_commission" attrs="{'invisible': [('for_rent', '=', False)]}" class="oe_inline" />
                <field name="rent_administrative_fees" attrs="{'invisible': [('for_rent', '=', False)]}" class="oe_inline" />
                <field name="rent_service_fees" attrs="{'invisible': [('for_rent', '=', False)]}" class="oe_inline" />
                <field name="company_responsible_for_service" attrs="{'invisible': ['|', ('for_rent', '=', False),('can_do_service', '=', False)]}" class="oe_inline" />
                <field name = "can_do_service" invisible ="1"/>
            </field>
            <div name="button_box" position="inside" >
                <button name="action_show_rents_history" type="object" class="oe_stat_button" icon="fa-bars">
                    <field name="rents_count" widget="statinfo" string="Rent Orders" />
                </button>
            </div>
            <div name="button_box2" position="inside" >
                <button name="action_show_property_rent_state" class="oe_stat_button" style="pointer-events: none;" readonly="1" icon="fa-file-text">
                    <field name="property_rent_state" string="Rent status" readonly="1"/>                        
                </button>
            </div>
        </field>
    </record>

    <record id="property_view_form_rent" model="ir.ui.view">
        <field name="name">property.view.form</field>
        <field name="model">property</field>
        <field name="arch" type="xml">
            <form string="test" edit="false">
                <header>
                    <button name="%(property_rent_action2)d"
                    string="Create Rent Quotation"
                    type="action" class="btn-primary"
                    attrs="{'invisible': [('property_rent_state', '!=', 'available')]}"
                    context="{'default_property_id': active_id, 'default_offered_price': expected_rent_price, 'default_payment_type': rent_type }">
                    </button>
                    <field name="state" widget="statusbar" statusbar_visible=" " />
                    
                </header>
                <sheet>
                    <div name="button_box" position="inside" >
                        <button name="action_show_rents_history" type="object" class="oe_stat_button" icon="fa-bars">
                            <field name="rents_count" widget="statinfo" string="Rent Orders" />
                        </button>
                    </div>
                    <div name="button_box2" position="inside" >
                        <button name="action_show_property_rent_state" class="oe_stat_button" style="pointer-events: none;" readonly="1" icon="fa-file-text">
                            <field name="property_rent_state" string="Rent status" readonly="1"/>                        
                        </button>
                    </div>
                    <widget name="web_ribbon" title="CONFIRMED" attrs="{'invisible': [('is_confirmed', '=', False)]}" />
                    <group>

                        <h1>
                            <group>
                                <field name="name"/>
                            </group>
                        </h1>
                        <div>
                            <group>
                                <br></br>
                                <field name="purpose" class="oe_inline" />
                            </group>
                        </div>

                    </group>

                    <group>
                        <field name="property_owner_id" widget="many2one_tags" class="oe_inline" />
                        <!-- <field name="property_type_id_purpose_related" invisible="1"/>
                        <field name="property_type_id_domain" invisible="1"/>
                        <field name="property_type_id" widget="radio" options="{'horizontal': true}" domain="property_type_id_domain"/> -->
                        <field name="property_type_id" widget="radio" options="{'horizontal': true}"/>
                    </group>
                    <group>
                        <div>
                            <group>
                                <h3>
                                    <strong>
                                        Property Address
                                    </strong>
                                </h3>
                            </group>
                            <div>
                                <div class="o_address_format" attrs="{'invisible': [('parent_property_id', '!=', False)]}">
                                    <field name="street" placeholder="Street..." class="o_address_street" />
                                    <field name="street2" placeholder="Street 2..." class="o_address_street" />
                                    <field name="city" placeholder="City" class="o_address_state oe_inline" />
                                    <field name="district" placeholder="District" class="o_address_state oe_inline" />
                                    <field name="zip" placeholder="ZIP" class="o_address_zip oe_inline" />
                                    <field name="country_id" placeholder="Country" class="o_address_country" />
                                </div>
                                <div class="o_address_format" attrs="{'invisible': [('parent_property_id', '=', False)]}">
                                    <field name="parent_street" placeholder="Street..." class="o_address_street" />
                                    <field name="parent_street2" placeholder="Street 2..." class="o_address_street" />
                                    <field name="parent_city" placeholder="City" class="o_address_state oe_inline" />
                                    <field name="parent_district" placeholder="District" class="o_address_state oe_inline" />
                                    <field name="parent_zip" placeholder="ZIP" class="o_address_zip oe_inline" />
                                    <field name="parent_country_id" placeholder="Country" class="o_address_country" />
                                </div>
                            </div>
                            <div>
                                <group>
                                    <h3>
                                        <strong>
                                            Direction of Streets
    
                                        </strong>
                                    </h3>
                                </group>

                                <div class="row">
                                    <div class="col-3">
                                        <field name="north_dirction" />
                                        <strong>North &#160;  </strong>
                                        <field name="has_street_length_related" invisible="1" />
                                        <field name="north_dirction_length" attrs="{'invisible': ['|',('has_street_length_related','=',False),('north_dirction', '=', False)]}" />
                                    </div>
                                    <div class="col-3">
                                        <field name="east_dirction" />
                                        <strong>East &#160;  </strong>
                                        <field name="east_dirction_length" attrs="{'invisible': ['|',('has_street_length_related','=',False),('east_dirction', '=', False)]}" />
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-3">
                                        <field name="west_dirction" />
                                        <strong>West &#160;  </strong>
                                        <field name="west_dirction_length" attrs="{'invisible': ['|',('has_street_length_related','=',False),('west_dirction', '=', False)]}" />
                                    </div>
                                    <div class="col-3">
                                        <field name="south_dirction" />
                                        <strong>South &#160;  </strong>
                                        <field name="south_dirction_length" attrs="{'invisible': ['|',('has_street_length_related','=',False),('south_dirction', '=', False)]}" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <group>
                                <h3>
                                    <strong>
                                        Property Information
                                    </strong>
                                </h3>
                            </group>

                            <group>

                                
                                <field name="deed_number" class="oe_inline" />
                                <field name="property_rent_state" invisible="1" />
                                <field name="for_rent" class="oe_edit_only" attrs="{'readonly': [('property_rent_state', 'in', ['reserved', 'rented'])], 'invisible':[('is_mu', '=', True)]}" />
                                <field name="for_rent" class="oe_read_only" attrs="{'invisible':[('for_rent', '=', False)]}" />
                                <field name="property_type_name_related" invisible="1" />

                                <field name="rent_type" attrs="{'readonly': [('property_type_name_related', '!=', 'Chalet')], 'invisible':[('for_rent', '=', False)]}" class="oe_inline" />
                                <field name="expected_rent_price" attrs="{'invisible': [('for_rent', '=', False)]}" class="oe_inline" />
                                <field name="refundable_insurance" attrs="{'invisible': [('for_rent', '=', False)]}" class="oe_inline" />
                                <field name="rent_commission" attrs="{'invisible': [('for_rent', '=', False)]}" class="oe_inline" />
                                <field name="rent_administrative_fees" attrs="{'invisible': [('for_rent', '=', False)]}" class="oe_inline" />
                                <field name="rent_service_fees" attrs="{'invisible': [('for_rent', '=', False)]}" class="oe_inline" />
                                <field name="company_responsible_for_service" attrs="{'invisible': ['|', ('for_rent', '=', False),('can_do_service', '=', False)]}" class="oe_inline" />
                                <field name = "can_do_service" invisible ="1"/>
                                <field name="is_mu_related" invisible="1" />
                                <field name="is_mu" attrs="{'invisible': [('is_mu_related', '=', False)]}" />
                                <field name="residential_type" attrs="{'invisible': [('purpose', '!=', 'residential')]}" class="oe_inline" />
                                <field name="property_type_name_related" invisible="1" />
                                <field name="property_construction_date" class="oe_edit_only" attrs="{'invisible': [('property_type_name_related', '=', 'Land')]}" />
                                <field name="property_building_age" attrs="{'invisible': [('property_type_name_related', '=', 'Land')]}" />
                                <field name="has_parent_type_related" invisible="1" />
                                <field name="parent_property_id" attrs="{'invisible': [('has_parent_type_related', '=', False)]}" />
                                <field name="property_area" class="oe_inline" />
                                <field name="is_floor" invisible="1" />
                                <field name="floor_num" attrs="{'invisible':[('is_floor', '=', False)]}" class="oe_inline" />
                                <field name="property_tag_ids" widget="many2many_tags" options="{'color_field': 'color'}" class="oe_inline" />
                            </group>


                        </div>

                    </group>
                    <group>
                        <field name="property_manager_id" class="oe_inline" />
                        <field name="is_confirmed" readonly="1" invisible="1" />


                    </group>

                    <group>
                        <notebook>
                            <page string="Specifications">
                                <field name="property_line_ids" />
                            </page>

                            <page string="Sub Properties" attrs="{'invisible':['|' ,('is_mu','=',False),('purpose','=','residentialandcommercial')]}">
                                <group>
                                    <field name="num_subProperties" />
                                </group>
                                <field name="property_child_ids" context="{'default_property_construction_date': property_construction_date, 'default_street': street, 'default_street2': street2, 'default_city': city, 'default_district': district, 'default_zip': zip, 'default_country_id': country_id}"></field>
                            </page>
                            <page string="Sub Properties (Residential)" attrs="{'invisible':['|' ,('is_mu','=',False),('purpose','!=','residentialandcommercial')]}">
                                <field name="residential_child_ids"></field>
                            </page>

                            <page string="Sub Properties (Commercial)" attrs="{'invisible':['|' ,('is_mu','=',False),('purpose','!=','residentialandcommercial')]}">
                                <field name="commercial_child_ids"></field>
                            </page>
                        </notebook>
                    </group>
                </sheet>
            </form>
        </field>
    </record>


    <record id="property_view_search_inherit" model="ir.ui.view">
        <field name="name">property.view.search.inherit</field>
        <field name="model">property</field>
        <field name="inherit_id" ref="aas_property_management.property_view_search" />
        <field name="arch" type="xml">
            <filter name="villa_duplex_filter" position="after">
                <field name="property_rent_ids_state" invisible='1' />
                <field name="for_rent" />
                <field name="rent_type" />
                <field name="expected_rent_price" />
                <filter string="Availabe" name='available_property' domain="[('property_rent_state', '=', 'available'),('for_rent', '=', True)]" />
                <filter string="Rented" name='rented_property' domain="[('property_rent_state', '=', 'rented')]" />
            </filter>
        </field>
    </record>

    <record id="property_rent_view_kanban" model="ir.ui.view">
        <field name="name">property.rent.view.kanban</field>
        <field name="model">property</field>
        <field name="arch" type="xml">
            <kanban default_group_by="property_rent_state" records_draggable="false">
                <field name="property_rent_state" />
                <templates>
                    <t t-name="kanban-box">
                        <!-- <div class="oe_kanban_global_click"/> -->
                        <div t-attf-class="oe_kanban_global_click #{kanban_color(record.color.raw_value)}">
                            <div class="o_dropdown_kanban dropdown">

                                <a class="dropdown-toggle o-no-caret btn" role="button" data-toggle="dropdown" data-display="static" href="#" aria-label="Dropdown menu" title="Dropdown menu">
                                    <span class="fa fa-ellipsis-v" />
                                </a>
                                <div class="dropdown-menu" role="menu">
                                    <ul class="oe_kanban_colorpicker" data-field="color" />
                                </div>
                            </div>
                            <field name="color" invisible="1" />
                            <div class="oe_kanban_content">
                                <div class="o_kanban_record_title">
                                    <strong>
                                        <field name="name" />
                                    </strong>
                                </div>
                                <div class="o_kanban_record_subtitle">
                                    <t t-if="record.expected_rent_price.raw_value">
                                        <field name="expected_rent_price" />
                                        <!-- <span t-if="record.recurring_revenue and record.recurring_revenue.raw_value"> + </span> -->
                                    </t>
                                </div>
                                <!-- <div>
                                    <span t-if="record.partner_id.value" t-esc="record.partner_id.value"/>
                                </div> -->
                                <div>
                                    <field name="property_type_id" />
                                </div>
                                <div>
                                    <t t-if="record.property_rent_state.raw_value != 'not available'">
                                        To be rented:
                                        <field name="rent_type" />
                                    </t>
                                </div>
                                <field name="purpose" />
                                <div>
                                    <field name="city" />
                                </div>

                                <!-- <div class="o_kanban_record_bottom">
                                    <div class="oe_kanban_bottom_left">
                                        <field name="priority" widget="priority" groups="base.group_user"/>
                                        <field name="activity_ids" widget="kanban_activity"/>
                                    </div>
                                    <div class="oe_kanban_bottom_right">
                                        <field name="property_owner_id" widget="many2one_avatar_user"/>
                                    </div>
                                </div> -->
                            </div>
                        </div>
                        <!-- </div> -->
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id="available_property_action" model="ir.actions.act_window">
        <field name="name">Property</field>
        <field name="res_model">property</field>
        <field name="view_mode">tree,form</field>
    
        <field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('property_view_tree_inherit')}),
        (0, 0, {'view_mode': 'form', 'view_id': ref('property_view_form_rent')})]"/>
        <field name="context">{'create': 0}</field>
        <field name="domain">[('is_confirmed','=', True),('property_rent_state', '=', 'available'),('for_rent','=',True)]</field>
    </record>

    <record id="rented_property_action" model="ir.actions.act_window">
        <field name="name">Property</field>
        <field name="res_model">property</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('is_rented','=', True)]</field>
        <field name="context">{'create': 0}</field>
        <field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('property_view_tree_inherit')}),
        (0, 0, {'view_mode': 'form', 'view_id': ref('property_view_form_rent')})]"/>
    </record>

    <record id="property_kanban_action" model="ir.actions.act_window">
        <field name="name">Property</field>
        <field name="res_model">property</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'create': 0}</field>
        <field name="domain">[('is_confirmed','=', True),('for_rent', '=', True)]</field>
        <field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'kanban', 'view_id': ref('property_rent_view_kanban')}),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('property_view_tree_inherit')}),
        (0, 0, {'view_mode': 'form', 'view_id': ref('property_view_form_rent')})]"/>
    </record>
    
</odoo>